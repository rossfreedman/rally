
// Random Cases PTI Calculator
const fs = require('fs');

// Experience level mappings  
const expToSigma = {
    "30+ matches": 3.2,
    "30+": 3.2,
    "10-30 Matches": 4.0,
    "10-30": 4.0,
    "1-10 matches": 5.0,
    "1-10": 5.0,
    "New Player": 7.0,
    "New": 7.0
};

// Main calculation function (using our discovered patterns)
function calculatePTI(testCase) {
    const playerPti = testCase.player_pti;
    const partnerPti = testCase.partner_pti;
    const opp1Pti = testCase.opp1_pti;
    const opp2Pti = testCase.opp2_pti;
    
    const playerSigma = expToSigma[testCase.player_exp] || 3.2;
    const partnerSigma = expToSigma[testCase.partner_exp] || 3.2;
    const opp1Sigma = expToSigma[testCase.opp1_exp] || 3.2;
    const opp2Sigma = expToSigma[testCase.opp2_exp] || 3.2;
    
    // Team averages
    const team1Avg = (playerPti + partnerPti) / 2;
    const team2Avg = (opp1Pti + opp2Pti) / 2;
    
    // Calculate spread
    const spread = Math.abs(team1Avg - team2Avg);
    
    // Determine who wins based on score
    const score = testCase.score;
    const sets = score.split(',');
    let team1Wins = 0;
    let team2Wins = 0;
    
    for (const set of sets) {
        const [score1, score2] = set.trim().split('-').map(Number);
        if (score1 > score2) team1Wins++;
        else team2Wins++;
    }
    
    const playerWins = team1Wins > team2Wins;
    
    // Calculate expected probability (Elo-style)
    const ratingDiff = team1Avg - team2Avg;
    const expectedProb = 1 / (1 + Math.pow(10, -ratingDiff / 400));
    
    // Calculate adjustment
    const actualResult = playerWins ? 1.0 : 0.0;
    const probDiff = actualResult - expectedProb;
    
    // K-factor based on experience (average of team sigmas)
    const avgSigma = (playerSigma + partnerSigma) / 2;
    const kFactor = avgSigma * 10; // Original pattern we discovered
    
    const adjustment = Math.abs(kFactor * probDiff);
    
    // Calculate new PTIs
    const change = playerWins ? -adjustment : adjustment;
    
    const playerAfter = playerPti + change;
    const partnerAfter = partnerPti + change;
    const opp1After = opp1Pti - change;
    const opp2After = opp2Pti - change;
    
    return {
        id: testCase.id,
        description: testCase.description,
        spread: spread,
        adjustment: adjustment,
        player_before: playerPti,
        player_after: parseFloat(playerAfter.toFixed(2)),
        partner_before: partnerPti,
        partner_after: parseFloat(partnerAfter.toFixed(2)),
        opp1_before: opp1Pti,
        opp1_after: parseFloat(opp1After.toFixed(2)),
        opp2_before: opp2Pti,
        opp2_after: parseFloat(opp2After.toFixed(2)),
        success: true,
        expected_prob: expectedProb,
        k_factor: kFactor,
        player_wins: playerWins
    };
}

// Test cases
const testCases = [{"id": 1, "player_pti": 53.9, "partner_pti": 53.8, "opp1_pti": 47.4, "opp2_pti": 38.2, "player_exp": "10-30", "partner_exp": "1-10", "opp1_exp": "30+", "opp2_exp": "30+", "score": "6-3,6-3", "description": "Random Case 1"}, {"id": 2, "player_pti": 53.7, "partner_pti": 48.5, "opp1_pti": 49.5, "opp2_pti": 23.2, "player_exp": "30+", "partner_exp": "30+", "opp1_exp": "30+", "opp2_exp": "1-10", "score": "6-4,7-6", "description": "Random Case 2"}, {"id": 3, "player_pti": 25.3, "partner_pti": 17.1, "opp1_pti": 27.8, "opp2_pti": 39.9, "player_exp": "30+", "partner_exp": "30+", "opp1_exp": "30+", "opp2_exp": "30+", "score": "6-3,6-3", "description": "Random Case 3"}, {"id": 4, "player_pti": 17.6, "partner_pti": 33.3, "opp1_pti": 22.8, "opp2_pti": 51.8, "player_exp": "30+", "partner_exp": "New Player", "opp1_exp": "1-10", "opp2_exp": "30+", "score": "7-5,5-7,6-4", "description": "Random Case 4"}, {"id": 5, "player_pti": 27.5, "partner_pti": 38.9, "opp1_pti": 41.3, "opp2_pti": 25.3, "player_exp": "30+", "partner_exp": "1-10", "opp1_exp": "30+", "opp2_exp": "30+", "score": "7-5,6-4", "description": "Random Case 5"}, {"id": 6, "player_pti": 47.8, "partner_pti": 39.6, "opp1_pti": 17.9, "opp2_pti": 33.0, "player_exp": "10-30", "partner_exp": "30+", "opp1_exp": "1-10", "opp2_exp": "30+", "score": "6-2,6-4", "description": "Random Case 6"}, {"id": 7, "player_pti": 19.9, "partner_pti": 27.1, "opp1_pti": 40.7, "opp2_pti": 38.0, "player_exp": "1-10", "partner_exp": "30+", "opp1_exp": "1-10", "opp2_exp": "30+", "score": "6-1,6-4", "description": "Random Case 7"}, {"id": 8, "player_pti": 46.7, "partner_pti": 35.4, "opp1_pti": 35.8, "opp2_pti": 50.2, "player_exp": "30+", "partner_exp": "30+", "opp1_exp": "10-30", "opp2_exp": "New Player", "score": "6-4,7-6", "description": "Random Case 8"}, {"id": 9, "player_pti": 40.7, "partner_pti": 19.9, "opp1_pti": 17.8, "opp2_pti": 33.4, "player_exp": "10-30", "partner_exp": "30+", "opp1_exp": "30+", "opp2_exp": "30+", "score": "6-2,2-6,6-3", "description": "Random Case 9"}, {"id": 10, "player_pti": 38.3, "partner_pti": 36.2, "opp1_pti": 44.1, "opp2_pti": 22.0, "player_exp": "30+", "partner_exp": "30+", "opp1_exp": "30+", "opp2_exp": "10-30", "score": "6-4,6-4", "description": "Random Case 10"}, {"id": 11, "player_pti": 49.2, "partner_pti": 52.2, "opp1_pti": 22.7, "opp2_pti": 46.2, "player_exp": "10-30", "partner_exp": "10-30", "opp1_exp": "30+", "opp2_exp": "30+", "score": "6-3,6-3", "description": "Random Case 11"}, {"id": 12, "player_pti": 22.8, "partner_pti": 36.7, "opp1_pti": 51.0, "opp2_pti": 39.4, "player_exp": "30+", "partner_exp": "10-30", "opp1_exp": "30+", "opp2_exp": "1-10", "score": "6-0,6-1", "description": "Random Case 12"}, {"id": 13, "player_pti": 37.5, "partner_pti": 49.7, "opp1_pti": 37.1, "opp2_pti": 36.4, "player_exp": "30+", "partner_exp": "30+", "opp1_exp": "10-30", "opp2_exp": "30+", "score": "6-3,6-3", "description": "Random Case 13"}, {"id": 14, "player_pti": 29.0, "partner_pti": 16.7, "opp1_pti": 43.9, "opp2_pti": 41.9, "player_exp": "30+", "partner_exp": "30+", "opp1_exp": "30+", "opp2_exp": "30+", "score": "6-1,6-2", "description": "Random Case 14"}, {"id": 15, "player_pti": 40.9, "partner_pti": 44.7, "opp1_pti": 54.8, "opp2_pti": 25.1, "player_exp": "30+", "partner_exp": "1-10", "opp1_exp": "New Player", "opp2_exp": "30+", "score": "6-4,7-5", "description": "Random Case 15"}, {"id": 16, "player_pti": 53.7, "partner_pti": 42.1, "opp1_pti": 22.9, "opp2_pti": 47.5, "player_exp": "10-30", "partner_exp": "30+", "opp1_exp": "New Player", "opp2_exp": "10-30", "score": "6-1,6-2", "description": "Random Case 16"}, {"id": 17, "player_pti": 30.1, "partner_pti": 22.8, "opp1_pti": 37.3, "opp2_pti": 25.1, "player_exp": "30+", "partner_exp": "30+", "opp1_exp": "30+", "opp2_exp": "30+", "score": "7-5,5-7,6-4", "description": "Random Case 17"}, {"id": 18, "player_pti": 49.0, "partner_pti": 18.7, "opp1_pti": 32.9, "opp2_pti": 43.5, "player_exp": "30+", "partner_exp": "10-30", "opp1_exp": "10-30", "opp2_exp": "30+", "score": "6-1,6-2", "description": "Random Case 18"}, {"id": 19, "player_pti": 20.5, "partner_pti": 38.6, "opp1_pti": 43.7, "opp2_pti": 52.5, "player_exp": "30+", "partner_exp": "30+", "opp1_exp": "30+", "opp2_exp": "30+", "score": "6-2,2-6,6-3", "description": "Random Case 19"}, {"id": 20, "player_pti": 44.4, "partner_pti": 39.2, "opp1_pti": 48.6, "opp2_pti": 36.4, "player_exp": "1-10", "partner_exp": "New Player", "opp1_exp": "30+", "opp2_exp": "New Player", "score": "6-0,6-1", "description": "Random Case 20"}, {"id": 21, "player_pti": 44.5, "partner_pti": 25.1, "opp1_pti": 32.3, "opp2_pti": 45.1, "player_exp": "30+", "partner_exp": "30+", "opp1_exp": "10-30", "opp2_exp": "30+", "score": "7-5,5-7,6-4", "description": "Random Case 21"}, {"id": 22, "player_pti": 51.4, "partner_pti": 50.4, "opp1_pti": 25.6, "opp2_pti": 43.4, "player_exp": "30+", "partner_exp": "1-10", "opp1_exp": "30+", "opp2_exp": "30+", "score": "7-5,5-7,6-4", "description": "Random Case 22"}, {"id": 23, "player_pti": 37.9, "partner_pti": 43.4, "opp1_pti": 30.6, "opp2_pti": 49.8, "player_exp": "10-30", "partner_exp": "1-10", "opp1_exp": "30+", "opp2_exp": "1-10", "score": "6-4,7-6", "description": "Random Case 23"}, {"id": 24, "player_pti": 26.2, "partner_pti": 51.7, "opp1_pti": 24.1, "opp2_pti": 19.7, "player_exp": "10-30", "partner_exp": "10-30", "opp1_exp": "1-10", "opp2_exp": "30+", "score": "6-3,6-3", "description": "Random Case 24"}, {"id": 25, "player_pti": 51.7, "partner_pti": 30.0, "opp1_pti": 41.8, "opp2_pti": 36.4, "player_exp": "30+", "partner_exp": "1-10", "opp1_exp": "30+", "opp2_exp": "30+", "score": "6-3,6-3", "description": "Random Case 25"}, {"id": 26, "player_pti": 35.7, "partner_pti": 51.8, "opp1_pti": 32.6, "opp2_pti": 36.0, "player_exp": "30+", "partner_exp": "1-10", "opp1_exp": "10-30", "opp2_exp": "30+", "score": "7-5,5-7,6-4", "description": "Random Case 26"}, {"id": 27, "player_pti": 42.4, "partner_pti": 30.1, "opp1_pti": 23.7, "opp2_pti": 47.5, "player_exp": "1-10", "partner_exp": "30+", "opp1_exp": "10-30", "opp2_exp": "1-10", "score": "7-5,6-4", "description": "Random Case 27"}, {"id": 28, "player_pti": 28.6, "partner_pti": 45.9, "opp1_pti": 52.4, "opp2_pti": 50.4, "player_exp": "30+", "partner_exp": "30+", "opp1_exp": "10-30", "opp2_exp": "30+", "score": "7-6,6-4", "description": "Random Case 28"}, {"id": 29, "player_pti": 21.2, "partner_pti": 23.1, "opp1_pti": 24.2, "opp2_pti": 46.4, "player_exp": "1-10", "partner_exp": "30+", "opp1_exp": "1-10", "opp2_exp": "1-10", "score": "6-4,7-6", "description": "Random Case 29"}, {"id": 30, "player_pti": 37.0, "partner_pti": 53.1, "opp1_pti": 54.0, "opp2_pti": 38.7, "player_exp": "30+", "partner_exp": "1-10", "opp1_exp": "30+", "opp2_exp": "10-30", "score": "7-5,5-7,6-4", "description": "Random Case 30"}, {"id": 31, "player_pti": 19.5, "partner_pti": 17.1, "opp1_pti": 31.4, "opp2_pti": 31.9, "player_exp": "10-30", "partner_exp": "1-10", "opp1_exp": "30+", "opp2_exp": "30+", "score": "6-4,4-6,6-4", "description": "Random Case 31"}, {"id": 32, "player_pti": 22.4, "partner_pti": 16.3, "opp1_pti": 38.4, "opp2_pti": 16.5, "player_exp": "30+", "partner_exp": "30+", "opp1_exp": "30+", "opp2_exp": "1-10", "score": "6-4,4-6,6-4", "description": "Random Case 32"}, {"id": 33, "player_pti": 32.6, "partner_pti": 21.7, "opp1_pti": 48.5, "opp2_pti": 38.1, "player_exp": "1-10", "partner_exp": "1-10", "opp1_exp": "10-30", "opp2_exp": "30+", "score": "6-3,6-4", "description": "Random Case 33"}, {"id": 34, "player_pti": 44.5, "partner_pti": 24.4, "opp1_pti": 26.8, "opp2_pti": 41.8, "player_exp": "New Player", "partner_exp": "30+", "opp1_exp": "30+", "opp2_exp": "New Player", "score": "6-3,6-3", "description": "Random Case 34"}, {"id": 35, "player_pti": 18.2, "partner_pti": 42.1, "opp1_pti": 35.4, "opp2_pti": 18.1, "player_exp": "10-30", "partner_exp": "30+", "opp1_exp": "30+", "opp2_exp": "30+", "score": "6-2,6-4", "description": "Random Case 35"}, {"id": 36, "player_pti": 20.5, "partner_pti": 19.0, "opp1_pti": 27.4, "opp2_pti": 52.4, "player_exp": "1-10", "partner_exp": "10-30", "opp1_exp": "10-30", "opp2_exp": "1-10", "score": "6-3,6-4", "description": "Random Case 36"}, {"id": 37, "player_pti": 46.5, "partner_pti": 52.1, "opp1_pti": 16.2, "opp2_pti": 32.2, "player_exp": "10-30", "partner_exp": "30+", "opp1_exp": "New Player", "opp2_exp": "1-10", "score": "6-4,4-6,6-4", "description": "Random Case 37"}, {"id": 38, "player_pti": 50.9, "partner_pti": 35.0, "opp1_pti": 49.0, "opp2_pti": 29.6, "player_exp": "10-30", "partner_exp": "30+", "opp1_exp": "30+", "opp2_exp": "10-30", "score": "6-2,6-4", "description": "Random Case 38"}, {"id": 39, "player_pti": 49.8, "partner_pti": 27.1, "opp1_pti": 44.7, "opp2_pti": 27.7, "player_exp": "1-10", "partner_exp": "New Player", "opp1_exp": "30+", "opp2_exp": "30+", "score": "7-5,5-7,6-4", "description": "Random Case 39"}, {"id": 40, "player_pti": 34.1, "partner_pti": 16.8, "opp1_pti": 49.8, "opp2_pti": 38.5, "player_exp": "30+", "partner_exp": "30+", "opp1_exp": "10-30", "opp2_exp": "30+", "score": "6-3,6-3", "description": "Random Case 40"}, {"id": 41, "player_pti": 32.5, "partner_pti": 20.5, "opp1_pti": 30.0, "opp2_pti": 18.9, "player_exp": "30+", "partner_exp": "30+", "opp1_exp": "10-30", "opp2_exp": "30+", "score": "7-5,5-7,6-4", "description": "Random Case 41"}, {"id": 42, "player_pti": 30.8, "partner_pti": 51.5, "opp1_pti": 45.7, "opp2_pti": 34.6, "player_exp": "30+", "partner_exp": "30+", "opp1_exp": "30+", "opp2_exp": "10-30", "score": "6-1,6-4", "description": "Random Case 42"}, {"id": 43, "player_pti": 46.0, "partner_pti": 26.1, "opp1_pti": 32.3, "opp2_pti": 34.1, "player_exp": "30+", "partner_exp": "30+", "opp1_exp": "10-30", "opp2_exp": "30+", "score": "7-5,6-4", "description": "Random Case 43"}, {"id": 44, "player_pti": 41.9, "partner_pti": 43.4, "opp1_pti": 42.7, "opp2_pti": 29.3, "player_exp": "New Player", "partner_exp": "30+", "opp1_exp": "30+", "opp2_exp": "30+", "score": "6-4,7-5", "description": "Random Case 44"}, {"id": 45, "player_pti": 38.3, "partner_pti": 53.7, "opp1_pti": 16.6, "opp2_pti": 27.7, "player_exp": "30+", "partner_exp": "30+", "opp1_exp": "30+", "opp2_exp": "1-10", "score": "7-5,6-4", "description": "Random Case 45"}, {"id": 46, "player_pti": 34.5, "partner_pti": 20.3, "opp1_pti": 52.6, "opp2_pti": 54.6, "player_exp": "1-10", "partner_exp": "30+", "opp1_exp": "30+", "opp2_exp": "30+", "score": "6-1,6-2", "description": "Random Case 46"}, {"id": 47, "player_pti": 27.1, "partner_pti": 47.6, "opp1_pti": 29.3, "opp2_pti": 25.7, "player_exp": "1-10", "partner_exp": "30+", "opp1_exp": "30+", "opp2_exp": "30+", "score": "7-5,6-4", "description": "Random Case 47"}, {"id": 48, "player_pti": 35.6, "partner_pti": 27.2, "opp1_pti": 53.5, "opp2_pti": 24.9, "player_exp": "New Player", "partner_exp": "30+", "opp1_exp": "1-10", "opp2_exp": "30+", "score": "6-1,6-4", "description": "Random Case 48"}, {"id": 49, "player_pti": 52.3, "partner_pti": 45.6, "opp1_pti": 49.3, "opp2_pti": 46.9, "player_exp": "New Player", "partner_exp": "New Player", "opp1_exp": "30+", "opp2_exp": "1-10", "score": "7-5,6-4", "description": "Random Case 49"}, {"id": 50, "player_pti": 15.2, "partner_pti": 48.3, "opp1_pti": 41.6, "opp2_pti": 26.0, "player_exp": "30+", "partner_exp": "10-30", "opp1_exp": "30+", "opp2_exp": "30+", "score": "6-4,4-6,6-4", "description": "Random Case 50"}, {"id": 51, "player_pti": 43.5, "partner_pti": 23.4, "opp1_pti": 19.7, "opp2_pti": 27.3, "player_exp": "10-30", "partner_exp": "1-10", "opp1_exp": "30+", "opp2_exp": "10-30", "score": "6-4,7-5", "description": "Random Case 51"}, {"id": 52, "player_pti": 49.7, "partner_pti": 53.8, "opp1_pti": 17.1, "opp2_pti": 37.4, "player_exp": "10-30", "partner_exp": "30+", "opp1_exp": "30+", "opp2_exp": "New Player", "score": "6-4,7-6", "description": "Random Case 52"}, {"id": 53, "player_pti": 40.0, "partner_pti": 36.9, "opp1_pti": 30.8, "opp2_pti": 18.8, "player_exp": "10-30", "partner_exp": "1-10", "opp1_exp": "New Player", "opp2_exp": "1-10", "score": "6-4,7-5", "description": "Random Case 53"}, {"id": 54, "player_pti": 15.3, "partner_pti": 38.9, "opp1_pti": 52.2, "opp2_pti": 27.8, "player_exp": "30+", "partner_exp": "1-10", "opp1_exp": "1-10", "opp2_exp": "30+", "score": "6-2,2-6,6-3", "description": "Random Case 54"}, {"id": 55, "player_pti": 52.4, "partner_pti": 20.3, "opp1_pti": 24.5, "opp2_pti": 29.2, "player_exp": "30+", "partner_exp": "1-10", "opp1_exp": "30+", "opp2_exp": "1-10", "score": "6-4,4-6,6-4", "description": "Random Case 55"}, {"id": 56, "player_pti": 37.3, "partner_pti": 39.4, "opp1_pti": 23.8, "opp2_pti": 49.4, "player_exp": "30+", "partner_exp": "1-10", "opp1_exp": "30+", "opp2_exp": "30+", "score": "6-2,2-6,6-3", "description": "Random Case 56"}, {"id": 57, "player_pti": 18.8, "partner_pti": 47.3, "opp1_pti": 31.1, "opp2_pti": 31.4, "player_exp": "30+", "partner_exp": "10-30", "opp1_exp": "1-10", "opp2_exp": "30+", "score": "7-6,6-4", "description": "Random Case 57"}, {"id": 58, "player_pti": 25.1, "partner_pti": 24.6, "opp1_pti": 48.8, "opp2_pti": 38.2, "player_exp": "30+", "partner_exp": "1-10", "opp1_exp": "30+", "opp2_exp": "30+", "score": "6-3,6-4", "description": "Random Case 58"}, {"id": 59, "player_pti": 24.8, "partner_pti": 23.2, "opp1_pti": 16.1, "opp2_pti": 49.1, "player_exp": "30+", "partner_exp": "30+", "opp1_exp": "30+", "opp2_exp": "30+", "score": "6-2,6-4", "description": "Random Case 59"}, {"id": 60, "player_pti": 54.1, "partner_pti": 32.6, "opp1_pti": 29.7, "opp2_pti": 43.1, "player_exp": "30+", "partner_exp": "30+", "opp1_exp": "30+", "opp2_exp": "1-10", "score": "6-2,2-6,6-3", "description": "Random Case 60"}, {"id": 61, "player_pti": 51.7, "partner_pti": 52.8, "opp1_pti": 46.5, "opp2_pti": 52.1, "player_exp": "New Player", "partner_exp": "1-10", "opp1_exp": "New Player", "opp2_exp": "30+", "score": "7-5,5-7,6-4", "description": "Random Case 61"}, {"id": 62, "player_pti": 23.5, "partner_pti": 41.4, "opp1_pti": 41.0, "opp2_pti": 37.0, "player_exp": "10-30", "partner_exp": "10-30", "opp1_exp": "1-10", "opp2_exp": "10-30", "score": "6-4,4-6,6-4", "description": "Random Case 62"}, {"id": 63, "player_pti": 47.1, "partner_pti": 53.6, "opp1_pti": 36.3, "opp2_pti": 22.3, "player_exp": "New Player", "partner_exp": "30+", "opp1_exp": "30+", "opp2_exp": "30+", "score": "6-3,6-3", "description": "Random Case 63"}, {"id": 64, "player_pti": 26.8, "partner_pti": 43.7, "opp1_pti": 54.6, "opp2_pti": 28.7, "player_exp": "30+", "partner_exp": "10-30", "opp1_exp": "30+", "opp2_exp": "30+", "score": "6-0,6-1", "description": "Random Case 64"}, {"id": 65, "player_pti": 37.5, "partner_pti": 30.0, "opp1_pti": 26.5, "opp2_pti": 31.8, "player_exp": "10-30", "partner_exp": "30+", "opp1_exp": "30+", "opp2_exp": "New Player", "score": "6-1,6-2", "description": "Random Case 65"}, {"id": 66, "player_pti": 35.8, "partner_pti": 29.7, "opp1_pti": 28.8, "opp2_pti": 46.0, "player_exp": "1-10", "partner_exp": "10-30", "opp1_exp": "New Player", "opp2_exp": "New Player", "score": "6-1,6-4", "description": "Random Case 66"}, {"id": 67, "player_pti": 49.8, "partner_pti": 38.1, "opp1_pti": 53.0, "opp2_pti": 35.8, "player_exp": "30+", "partner_exp": "30+", "opp1_exp": "30+", "opp2_exp": "30+", "score": "6-1,6-4", "description": "Random Case 67"}, {"id": 68, "player_pti": 18.4, "partner_pti": 45.8, "opp1_pti": 16.7, "opp2_pti": 21.7, "player_exp": "30+", "partner_exp": "10-30", "opp1_exp": "30+", "opp2_exp": "10-30", "score": "6-2,6-4", "description": "Random Case 68"}, {"id": 69, "player_pti": 36.3, "partner_pti": 22.1, "opp1_pti": 21.3, "opp2_pti": 18.2, "player_exp": "New Player", "partner_exp": "30+", "opp1_exp": "30+", "opp2_exp": "30+", "score": "6-3,6-3", "description": "Random Case 69"}, {"id": 70, "player_pti": 27.0, "partner_pti": 16.4, "opp1_pti": 25.0, "opp2_pti": 41.1, "player_exp": "30+", "partner_exp": "10-30", "opp1_exp": "30+", "opp2_exp": "30+", "score": "6-2,2-6,6-3", "description": "Random Case 70"}, {"id": 71, "player_pti": 40.7, "partner_pti": 48.3, "opp1_pti": 33.3, "opp2_pti": 26.9, "player_exp": "10-30", "partner_exp": "1-10", "opp1_exp": "30+", "opp2_exp": "10-30", "score": "6-2,2-6,6-3", "description": "Random Case 71"}, {"id": 72, "player_pti": 44.0, "partner_pti": 37.7, "opp1_pti": 21.8, "opp2_pti": 26.0, "player_exp": "1-10", "partner_exp": "30+", "opp1_exp": "1-10", "opp2_exp": "30+", "score": "6-3,6-3", "description": "Random Case 72"}, {"id": 73, "player_pti": 40.2, "partner_pti": 50.0, "opp1_pti": 43.3, "opp2_pti": 25.0, "player_exp": "New Player", "partner_exp": "10-30", "opp1_exp": "30+", "opp2_exp": "30+", "score": "6-3,6-3", "description": "Random Case 73"}, {"id": 74, "player_pti": 18.7, "partner_pti": 39.6, "opp1_pti": 31.6, "opp2_pti": 23.1, "player_exp": "1-10", "partner_exp": "10-30", "opp1_exp": "1-10", "opp2_exp": "30+", "score": "6-4,7-5", "description": "Random Case 74"}, {"id": 75, "player_pti": 47.1, "partner_pti": 16.2, "opp1_pti": 18.2, "opp2_pti": 18.1, "player_exp": "10-30", "partner_exp": "30+", "opp1_exp": "30+", "opp2_exp": "30+", "score": "6-0,6-1", "description": "Random Case 75"}, {"id": 76, "player_pti": 40.4, "partner_pti": 33.9, "opp1_pti": 39.8, "opp2_pti": 33.8, "player_exp": "30+", "partner_exp": "30+", "opp1_exp": "30+", "opp2_exp": "1-10", "score": "6-1,6-4", "description": "Random Case 76"}, {"id": 77, "player_pti": 49.2, "partner_pti": 44.2, "opp1_pti": 52.9, "opp2_pti": 22.1, "player_exp": "10-30", "partner_exp": "30+", "opp1_exp": "30+", "opp2_exp": "1-10", "score": "6-4,7-5", "description": "Random Case 77"}, {"id": 78, "player_pti": 45.8, "partner_pti": 40.6, "opp1_pti": 53.5, "opp2_pti": 24.5, "player_exp": "30+", "partner_exp": "30+", "opp1_exp": "30+", "opp2_exp": "New Player", "score": "6-2,6-4", "description": "Random Case 78"}, {"id": 79, "player_pti": 39.8, "partner_pti": 15.6, "opp1_pti": 42.6, "opp2_pti": 29.3, "player_exp": "30+", "partner_exp": "30+", "opp1_exp": "10-30", "opp2_exp": "10-30", "score": "6-4,4-6,6-4", "description": "Random Case 79"}, {"id": 80, "player_pti": 19.0, "partner_pti": 25.9, "opp1_pti": 51.8, "opp2_pti": 50.0, "player_exp": "1-10", "partner_exp": "10-30", "opp1_exp": "30+", "opp2_exp": "30+", "score": "6-2,2-6,6-3", "description": "Random Case 80"}, {"id": 81, "player_pti": 23.4, "partner_pti": 21.6, "opp1_pti": 35.7, "opp2_pti": 19.9, "player_exp": "30+", "partner_exp": "30+", "opp1_exp": "30+", "opp2_exp": "10-30", "score": "6-4,6-4", "description": "Random Case 81"}, {"id": 82, "player_pti": 48.2, "partner_pti": 29.2, "opp1_pti": 23.3, "opp2_pti": 42.5, "player_exp": "30+", "partner_exp": "30+", "opp1_exp": "30+", "opp2_exp": "10-30", "score": "6-2,6-4", "description": "Random Case 82"}, {"id": 83, "player_pti": 47.9, "partner_pti": 25.6, "opp1_pti": 36.0, "opp2_pti": 16.2, "player_exp": "30+", "partner_exp": "30+", "opp1_exp": "New Player", "opp2_exp": "30+", "score": "6-3,6-3", "description": "Random Case 83"}, {"id": 84, "player_pti": 54.3, "partner_pti": 20.3, "opp1_pti": 43.4, "opp2_pti": 45.6, "player_exp": "1-10", "partner_exp": "1-10", "opp1_exp": "30+", "opp2_exp": "30+", "score": "6-4,6-4", "description": "Random Case 84"}, {"id": 85, "player_pti": 53.9, "partner_pti": 48.8, "opp1_pti": 30.1, "opp2_pti": 54.4, "player_exp": "30+", "partner_exp": "30+", "opp1_exp": "30+", "opp2_exp": "1-10", "score": "6-4,6-4", "description": "Random Case 85"}, {"id": 86, "player_pti": 51.6, "partner_pti": 36.6, "opp1_pti": 46.9, "opp2_pti": 24.2, "player_exp": "30+", "partner_exp": "New Player", "opp1_exp": "1-10", "opp2_exp": "30+", "score": "7-6,6-4", "description": "Random Case 86"}, {"id": 87, "player_pti": 15.6, "partner_pti": 49.1, "opp1_pti": 49.2, "opp2_pti": 45.3, "player_exp": "30+", "partner_exp": "30+", "opp1_exp": "30+", "opp2_exp": "30+", "score": "7-5,6-4", "description": "Random Case 87"}, {"id": 88, "player_pti": 17.0, "partner_pti": 46.5, "opp1_pti": 45.4, "opp2_pti": 35.4, "player_exp": "New Player", "partner_exp": "30+", "opp1_exp": "10-30", "opp2_exp": "30+", "score": "6-1,6-2", "description": "Random Case 88"}, {"id": 89, "player_pti": 29.3, "partner_pti": 30.7, "opp1_pti": 27.1, "opp2_pti": 28.9, "player_exp": "10-30", "partner_exp": "30+", "opp1_exp": "10-30", "opp2_exp": "1-10", "score": "6-4,4-6,6-4", "description": "Random Case 89"}, {"id": 90, "player_pti": 40.4, "partner_pti": 44.0, "opp1_pti": 36.3, "opp2_pti": 48.0, "player_exp": "30+", "partner_exp": "1-10", "opp1_exp": "30+", "opp2_exp": "1-10", "score": "7-6,6-4", "description": "Random Case 90"}, {"id": 91, "player_pti": 40.9, "partner_pti": 47.2, "opp1_pti": 26.5, "opp2_pti": 54.2, "player_exp": "10-30", "partner_exp": "1-10", "opp1_exp": "30+", "opp2_exp": "1-10", "score": "6-3,6-3", "description": "Random Case 91"}, {"id": 92, "player_pti": 28.1, "partner_pti": 18.9, "opp1_pti": 49.6, "opp2_pti": 15.9, "player_exp": "30+", "partner_exp": "30+", "opp1_exp": "30+", "opp2_exp": "30+", "score": "6-4,7-6", "description": "Random Case 92"}, {"id": 93, "player_pti": 41.8, "partner_pti": 29.8, "opp1_pti": 21.7, "opp2_pti": 17.3, "player_exp": "1-10", "partner_exp": "30+", "opp1_exp": "1-10", "opp2_exp": "30+", "score": "6-4,6-4", "description": "Random Case 93"}, {"id": 94, "player_pti": 50.6, "partner_pti": 19.7, "opp1_pti": 23.7, "opp2_pti": 47.0, "player_exp": "30+", "partner_exp": "30+", "opp1_exp": "30+", "opp2_exp": "New Player", "score": "6-3,6-3", "description": "Random Case 94"}, {"id": 95, "player_pti": 25.2, "partner_pti": 54.8, "opp1_pti": 34.1, "opp2_pti": 18.9, "player_exp": "30+", "partner_exp": "30+", "opp1_exp": "10-30", "opp2_exp": "30+", "score": "7-5,5-7,6-4", "description": "Random Case 95"}, {"id": 96, "player_pti": 23.1, "partner_pti": 34.9, "opp1_pti": 25.0, "opp2_pti": 16.7, "player_exp": "30+", "partner_exp": "10-30", "opp1_exp": "30+", "opp2_exp": "30+", "score": "7-5,6-4", "description": "Random Case 96"}, {"id": 97, "player_pti": 18.5, "partner_pti": 40.3, "opp1_pti": 45.1, "opp2_pti": 19.9, "player_exp": "10-30", "partner_exp": "30+", "opp1_exp": "1-10", "opp2_exp": "New Player", "score": "6-1,6-4", "description": "Random Case 97"}, {"id": 98, "player_pti": 22.1, "partner_pti": 20.5, "opp1_pti": 32.8, "opp2_pti": 27.2, "player_exp": "30+", "partner_exp": "30+", "opp1_exp": "30+", "opp2_exp": "30+", "score": "7-6,6-4", "description": "Random Case 98"}, {"id": 99, "player_pti": 42.6, "partner_pti": 17.2, "opp1_pti": 17.0, "opp2_pti": 52.6, "player_exp": "10-30", "partner_exp": "30+", "opp1_exp": "30+", "opp2_exp": "30+", "score": "6-3,6-4", "description": "Random Case 99"}, {"id": 100, "player_pti": 28.8, "partner_pti": 41.4, "opp1_pti": 45.3, "opp2_pti": 29.2, "player_exp": "1-10", "partner_exp": "30+", "opp1_exp": "10-30", "opp2_exp": "30+", "score": "6-1,6-2", "description": "Random Case 100"}];

// Calculate all test cases
const results = testCases.map(calculatePTI);

// Output results
console.log(JSON.stringify(results, null, 2));

// Also save to file
fs.writeFileSync('random_100_expected.json', JSON.stringify(results, null, 2));
console.error(`Calculated ${results.length} random test cases.`);
