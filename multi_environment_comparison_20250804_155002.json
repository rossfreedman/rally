{
  "timestamp": "2025-08-04T15:50:02.185872",
  "comparison_type": "multi_environment",
  "environments": {
    "local": {
      "name": "Local",
      "description": "Local development database",
      "connected": true
    },
    "staging": {
      "name": "Staging",
      "description": "Railway staging database",
      "connected": true
    },
    "production": {
      "name": "Production",
      "description": "Railway production database",
      "connected": false
    }
  },
  "schema_comparison": {
    "tables_by_environment": {
      "user_contexts": {
        "local": true,
        "staging": false
      },
      "series_stats": {
        "local": true,
        "staging": true
      },
      "pickup_games": {
        "local": true,
        "staging": true
      },
      "schedule": {
        "local": true,
        "staging": true
      },
      "practice_times": {
        "local": true,
        "staging": false
      },
      "test_etl_runs": {
        "local": true,
        "staging": false
      },
      "pros": {
        "local": true,
        "staging": true
      },
      "practice_times_corrupted_backup": {
        "local": true,
        "staging": false
      },
      "captain_messages": {
        "local": true,
        "staging": true
      },
      "player_season_tracking": {
        "local": true,
        "staging": true
      },
      "users": {
        "local": true,
        "staging": true
      },
      "pickup_game_participants": {
        "local": true,
        "staging": true
      },
      "team_mapping_backup": {
        "local": true,
        "staging": true
      },
      "weather_cache": {
        "local": true,
        "staging": true
      },
      "system_settings": {
        "local": true,
        "staging": true
      },
      "players": {
        "local": true,
        "staging": true
      },
      "user_activity_logs": {
        "local": true,
        "staging": true
      },
      "enhanced_league_contexts_backup": {
        "local": true,
        "staging": false
      },
      "player_history": {
        "local": true,
        "staging": true
      },
      "clubs": {
        "local": true,
        "staging": true
      },
      "alembic_version": {
        "local": true,
        "staging": true
      },
      "club_leagues": {
        "local": true,
        "staging": true
      },
      "polls": {
        "local": true,
        "staging": true
      },
      "user_instructions": {
        "local": true,
        "staging": true
      },
      "poll_responses": {
        "local": true,
        "staging": true
      },
      "activity_log": {
        "local": true,
        "staging": true
      },
      "teams": {
        "local": true,
        "staging": true
      },
      "user_player_associations": {
        "local": true,
        "staging": true
      },
      "lineup_escrow": {
        "local": true,
        "staging": true
      },
      "group_members": {
        "local": true,
        "staging": true
      },
      "poll_choices": {
        "local": true,
        "staging": true
      },
      "lineup_escrow_views": {
        "local": true,
        "staging": true
      },
      "series": {
        "local": true,
        "staging": true
      },
      "match_scores": {
        "local": true,
        "staging": true
      },
      "user_session_refresh_signals": {
        "local": true,
        "staging": true
      },
      "groups": {
        "local": true,
        "staging": true
      },
      "series_leagues": {
        "local": true,
        "staging": true
      },
      "leagues": {
        "local": true,
        "staging": true
      },
      "saved_lineups": {
        "local": true,
        "staging": true
      },
      "pro_lessons": {
        "local": true,
        "staging": true
      },
      "player_availability": {
        "local": true,
        "staging": true
      }
    },
    "column_differences": {
      "users": {
        "environments": [
          "local",
          "staging"
        ],
        "column_presence": {
          "local": "{'league_context', 'first_name', 'last_login', 'notifications_hidden', 'has_temporary_password', 'league_id', 'password_hash', 'email', 'phone_number', 'id', 'temporary_password_set_at', 'tenniscores_player_id', 'ad_deuce_preference', 'dominant_hand', 'club_automation_password', 'is_admin', 'created_at', 'last_name'}",
          "staging": "{'league_context', 'first_name', 'last_login', 'temporary_password_set_at', 'has_temporary_password', 'league_id', 'password_hash', 'email', 'phone_number', 'id', 'tenniscores_player_id', 'team_id', 'ad_deuce_preference', 'dominant_hand', 'club_automation_password', 'is_admin', 'created_at', 'last_name'}"
        },
        "missing_columns": {
          "local": [
            "team_id"
          ],
          "staging": [
            "notifications_hidden"
          ]
        },
        "type_differences": {}
      },
      "user_player_associations": {
        "environments": [
          "local",
          "staging"
        ],
        "column_presence": {
          "local": "{'tenniscores_player_id', 'user_id', 'created_at'}",
          "staging": "{'tenniscores_player_id', 'created_at', 'user_id', 'is_primary'}"
        },
        "missing_columns": {
          "local": [
            "is_primary"
          ]
        },
        "type_differences": {}
      },
      "lineup_escrow": {
        "environments": [
          "local",
          "staging"
        ],
        "column_presence": {
          "local": "{'id', 'recipient_submitted_at', 'initiator_lineup', 'initiator_team_id', 'recipient_notified', 'initiator_submitted_at', 'escrow_token', 'initiator_user_id', 'created_at', 'expires_at', 'initiator_notified', 'recipient_contact', 'message_body', 'subject', 'recipient_name', 'contact_type', 'updated_at', 'recipient_team_id', 'status', 'recipient_lineup'}",
          "staging": "{'recipient_name', 'contact_type', 'recipient_lineup', 'updated_at', 'expires_at', 'id', 'initiator_submitted_at', 'recipient_submitted_at', 'recipient_notified', 'initiator_notified', 'status', 'recipient_contact', 'initiator_lineup', 'escrow_token', 'initiator_user_id', 'message_body', 'created_at', 'subject'}"
        },
        "missing_columns": {
          "staging": [
            "initiator_team_id",
            "recipient_team_id"
          ]
        },
        "type_differences": {}
      },
      "match_scores": {
        "environments": [
          "local",
          "staging"
        ],
        "column_presence": {
          "local": "{'home_team_id', 'home_player_2_id', 'home_player_1_id', 'away_team', 'tenniscores_match_id', 'scores', 'away_player_1_id', 'league_id', 'match_id', 'id', 'away_team_id', 'winner', 'away_player_2_id', 'home_team', 'match_date', 'created_at'}",
          "staging": "{'home_team_id', 'home_player_2_id', 'home_player_1_id', 'away_team', 'tenniscores_match_id', 'scores', 'away_player_1_id', 'league_id', 'id', 'away_team_id', 'winner', 'away_player_2_id', 'home_team', 'match_date', 'created_at'}"
        },
        "missing_columns": {
          "staging": [
            "match_id"
          ]
        },
        "type_differences": {}
      }
    },
    "constraint_differences": {},
    "index_differences": {},
    "summary": {
      "environments_compared": [
        "local",
        "staging"
      ],
      "total_tables_by_environment": {
        "local": 41,
        "staging": 36
      },
      "tables_with_differences": 4,
      "schema_identical": false
    }
  },
  "data_comparison": {
    "row_count_differences": {
      "pickup_games": {
        "environments": [
          "local",
          "staging"
        ],
        "counts": {
          "local": 10,
          "staging": 7
        }
      },
      "schedule": {
        "environments": [
          "local",
          "staging"
        ],
        "counts": {
          "local": 7375,
          "staging": 7387
        }
      },
      "captain_messages": {
        "environments": [
          "local",
          "staging"
        ],
        "counts": {
          "local": 13,
          "staging": 5
        }
      },
      "player_season_tracking": {
        "environments": [
          "local",
          "staging"
        ],
        "counts": {
          "local": 23,
          "staging": 26
        }
      },
      "users": {
        "environments": [
          "local",
          "staging"
        ],
        "counts": {
          "local": 14,
          "staging": 31
        }
      },
      "pickup_game_participants": {
        "environments": [
          "local",
          "staging"
        ],
        "counts": {
          "local": 6,
          "staging": 14
        }
      },
      "weather_cache": {
        "environments": [
          "local",
          "staging"
        ],
        "counts": {
          "local": 16,
          "staging": 8
        }
      },
      "system_settings": {
        "environments": [
          "local",
          "staging"
        ],
        "counts": {
          "local": 5,
          "staging": 4
        }
      },
      "players": {
        "environments": [
          "local",
          "staging"
        ],
        "counts": {
          "local": 10329,
          "staging": 10298
        }
      },
      "user_activity_logs": {
        "environments": [
          "local",
          "staging"
        ],
        "counts": {
          "local": 9099,
          "staging": 3407
        }
      },
      "polls": {
        "environments": [
          "local",
          "staging"
        ],
        "counts": {
          "local": 2,
          "staging": 6
        }
      },
      "user_instructions": {
        "environments": [
          "local",
          "staging"
        ],
        "counts": {
          "local": 2,
          "staging": 0
        }
      },
      "poll_responses": {
        "environments": [
          "local",
          "staging"
        ],
        "counts": {
          "local": 1,
          "staging": 0
        }
      },
      "activity_log": {
        "environments": [
          "local",
          "staging"
        ],
        "counts": {
          "local": 62,
          "staging": 53
        }
      },
      "user_player_associations": {
        "environments": [
          "local",
          "staging"
        ],
        "counts": {
          "local": 18,
          "staging": 45
        }
      },
      "lineup_escrow": {
        "environments": [
          "local",
          "staging"
        ],
        "counts": {
          "local": 22,
          "staging": 0
        }
      },
      "group_members": {
        "environments": [
          "local",
          "staging"
        ],
        "counts": {
          "local": 4,
          "staging": 10
        }
      },
      "poll_choices": {
        "environments": [
          "local",
          "staging"
        ],
        "counts": {
          "local": 4,
          "staging": 12
        }
      },
      "lineup_escrow_views": {
        "environments": [
          "local",
          "staging"
        ],
        "counts": {
          "local": 37,
          "staging": 0
        }
      },
      "match_scores": {
        "environments": [
          "local",
          "staging"
        ],
        "counts": {
          "local": 18074,
          "staging": 44937
        }
      },
      "user_session_refresh_signals": {
        "environments": [
          "local",
          "staging"
        ],
        "counts": {
          "local": 15,
          "staging": 31
        }
      },
      "groups": {
        "environments": [
          "local",
          "staging"
        ],
        "counts": {
          "local": 3,
          "staging": 5
        }
      },
      "saved_lineups": {
        "environments": [
          "local",
          "staging"
        ],
        "counts": {
          "local": 1,
          "staging": 0
        }
      },
      "player_availability": {
        "environments": [
          "local",
          "staging"
        ],
        "counts": {
          "local": 21,
          "staging": 13
        }
      }
    },
    "tables_by_environment": {
      "user_contexts": {
        "local": true,
        "staging": false
      },
      "series_stats": {
        "local": true,
        "staging": true
      },
      "pickup_games": {
        "local": true,
        "staging": true
      },
      "schedule": {
        "local": true,
        "staging": true
      },
      "practice_times": {
        "local": true,
        "staging": false
      },
      "test_etl_runs": {
        "local": true,
        "staging": false
      },
      "pros": {
        "local": true,
        "staging": true
      },
      "practice_times_corrupted_backup": {
        "local": true,
        "staging": false
      },
      "captain_messages": {
        "local": true,
        "staging": true
      },
      "player_season_tracking": {
        "local": true,
        "staging": true
      },
      "users": {
        "local": true,
        "staging": true
      },
      "pickup_game_participants": {
        "local": true,
        "staging": true
      },
      "team_mapping_backup": {
        "local": true,
        "staging": true
      },
      "weather_cache": {
        "local": true,
        "staging": true
      },
      "system_settings": {
        "local": true,
        "staging": true
      },
      "players": {
        "local": true,
        "staging": true
      },
      "user_activity_logs": {
        "local": true,
        "staging": true
      },
      "enhanced_league_contexts_backup": {
        "local": true,
        "staging": false
      },
      "player_history": {
        "local": true,
        "staging": true
      },
      "clubs": {
        "local": true,
        "staging": true
      },
      "alembic_version": {
        "local": true,
        "staging": true
      },
      "club_leagues": {
        "local": true,
        "staging": true
      },
      "polls": {
        "local": true,
        "staging": true
      },
      "user_instructions": {
        "local": true,
        "staging": true
      },
      "poll_responses": {
        "local": true,
        "staging": true
      },
      "activity_log": {
        "local": true,
        "staging": true
      },
      "teams": {
        "local": true,
        "staging": true
      },
      "user_player_associations": {
        "local": true,
        "staging": true
      },
      "lineup_escrow": {
        "local": true,
        "staging": true
      },
      "group_members": {
        "local": true,
        "staging": true
      },
      "poll_choices": {
        "local": true,
        "staging": true
      },
      "lineup_escrow_views": {
        "local": true,
        "staging": true
      },
      "series": {
        "local": true,
        "staging": true
      },
      "match_scores": {
        "local": true,
        "staging": true
      },
      "user_session_refresh_signals": {
        "local": true,
        "staging": true
      },
      "groups": {
        "local": true,
        "staging": true
      },
      "series_leagues": {
        "local": true,
        "staging": true
      },
      "leagues": {
        "local": true,
        "staging": true
      },
      "saved_lineups": {
        "local": true,
        "staging": true
      },
      "pro_lessons": {
        "local": true,
        "staging": true
      },
      "player_availability": {
        "local": true,
        "staging": true
      }
    },
    "summary": {
      "environments_compared": [
        "local",
        "staging"
      ],
      "total_rows_by_environment": {
        "local": 3911677,
        "staging": 462689
      },
      "tables_with_count_differences": 24,
      "data_identical": false
    }
  },
  "connected_environments": [
    "local",
    "staging"
  ]
}